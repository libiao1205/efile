(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{VZbN:function(t,e,s){"use strict";s.r(e);var r=s("L2JU"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},o={data:function(){return{loginForm:{name:"",password:"",captcha:""},loginRules:{name:[{required:!0,message:"",trigger:"blur"}],password:[{required:!0,message:"",trigger:"blur"}],captcha:[{required:!1,message:"",trigger:"blur"}]},captcha:{show:!1,src:""},sysMsg:"",rep:"",viewImageUrl:this.$upload+"/setting/getLogoImg?seed="}},computed:a({},Object(r.d)({lang:function(t){return t.lang},theme:function(t){return t.theme}})),watch:{"captcha.show":function(t){this.loginRules.captcha[0].required=t}},beforeMount:function(){this.setErrMsg()},mounted:function(){this.rep=this.$route.query.rep,this.$refs.nameInput.focus()},methods:a({},Object(r.b)({login:"auth/loginByEmail",loadLang:"loadLang"}),{passwordInputFocus:function(){this.$refs.passwordInput.focus()},submitForm:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return!1;t.login({name:t.loginForm.name,password:t.loginForm.password}).then(function(e){e.login?t.rep?t.$router.push({path:"share",query:{id:t.rep}}):t.$router.push("home"):t.sysMsg=e.message})})},setErrMsg:function(){this.loginRules.name[0].message=this.$t("global.errMsg.inputRequired",{cont:this.$t("global.username")}),this.loginRules.password[0].message=this.$t("global.errMsg.inputRequired",{cont:this.$t("global.password")}),this.loginRules.captcha[0].message=this.$t("global.errMsg.inputRequired",{cont:this.$t("global.captcha")})}})},n=(s("eA8E"),s("KHd+")),i=Object(n.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sys-login"},[s("div",{staticClass:"login-area"},[s("el-card",{attrs:{shadow:"hover"}},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.viewImageUrl,alt:""}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.loginRules,"label-position":"left","label-width":"0px"}},[s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{ref:"nameInput",attrs:{type:"text",placeholder:t.$t("global.username")},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.passwordInputFocus(e):null}},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name",e)},expression:"loginForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{ref:"passwordInput",attrs:{type:"password",placeholder:t.$t("global.password")},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitForm(e):null}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),t.captcha.show?s("el-form-item",{staticClass:"captcha",attrs:{prop:"captcha"}},[s("img",{attrs:{src:t.captcha.src,alt:""}}),t._v(" "),s("el-input",{attrs:{type:"text",placeholder:t.$t("global.captcha")},model:{value:t.loginForm.captcha,callback:function(e){t.$set(t.loginForm,"captcha",e)},expression:"loginForm.captcha"}})],1):t._e(),t._v(" "),s("a",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v(t._s(t.$t("global.login")))])],1),t._v(" "),t.sysMsg?s("div",{staticClass:"err-msg"},[t._v(t._s(t.sysMsg))]):t._e()],1),t._v(" "),s("div",{staticClass:"tip"})])],1)])},[],!1,null,null,null);e.default=i.exports},eA8E:function(t,e,s){"use strict";var r=s("yJEu");s.n(r).a},yJEu:function(t,e,s){}}]);